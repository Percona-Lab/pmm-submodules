bin_dir=$(cd $(dirname $0); pwd -P)
root_dir=$(cd $(dirname $0)/../..; pwd -P)
tmp_dir=${root_dir}/tmp
branch=$(git rev-parse --abbrev-ref HEAD)

# In VERSION file we can have numeric value like '2.0.0' as well as
# alphanumeric value like '2.0.0-alpha3' which we can not be used entirely
# e.g. in Version directive in spec files. That is why we split it
# in two values.
real_pmm_version=$(cat ${root_dir}/VERSION | awk -F'-' '{print $1}')
real_pmm_release=$(cat ${root_dir}/VERSION | awk -F'-' '{print $2}')
if [ -z "${pmm_version}" ]; then
    if [[ ${branch} == 'PMM-2.0' ]]; then
        pmm_version=$real_pmm_version
    else
        pmm_version=${branch}-$(git rev-parse --short HEAD)
    fi
fi
rpmbuild_docker_image=${RPMBUILD_DOCKER_IMAGE:-perconalab/rpmbuild:2}
rpms_dir=${root_dir}/tmp/pmm-server/RPMS
rpmbuild_dir=${root_dir}/sources/pmm-server-packaging/rhel
source_dir=${root_dir}/tmp/source/pmm2-client-${pmm_version}
binary_dir=${root_dir}/tmp/binary/pmm2-client-${pmm_version}
client_properties=${root_dir}/results/pmm-client.properties
docker_tag_file=${root_dir}/results/docker/TAG
docker_client_tag_file=${root_dir}/results/docker/CLIENT_TAG
docker_tarball=${root_dir}/results/docker/pmm-server-${pmm_version}.docker
docker_client_tarball=${root_dir}/results/docker/pmm2-client-${pmm_version}.docker
source_tarball=${root_dir}/results/source_tarball/pmm2-client-${pmm_version}.tar.gz
binary_tarball=${root_dir}/results/tarball/pmm2-client-${pmm_version}.tar.gz
