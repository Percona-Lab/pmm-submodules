# Docker image for PMM 2.0 Client

This image is EXPERIMENTAL and SHOULD NOT be runned in PRODUCTION.

## Build

All examples explained here supposed that you are inside `pmm-submodules/` directory.

Just run:

```bash
./build/bin/build-client
```

It builds client sources, binaries and Docker image.
Next time, for rebuild an image, you can run:

```bash
./build/bin/build-client-docker
```

but keep in mind, it depends on files that generated by:

```bash
./build/bin/build-client-source
./build/bin/build-client-binary
```


## Run for development

### Preconditions

1. Local `nginx` from `percona/pmm` should be started (See: `make serve` in `percona/pmm/api` ).
2. All containers for development from `percona/pmm-managed` should be started (See: `make env-up` in `percona/pmm-managed`).
3. `pmm-managed` should be started (See: `make run` in `percona/pmm-managed`).
4. Docker container should be runned in one network with Prometheus. (See: `--network=pmm-managed_default`).

#### Mac example

```bash
docker run --network=pmm-managed_default \
 --rm \
 --name pmm-agent-docker \
 -e PMM_SERVER=host.docker.internal:8443 \
 -e PMM_USER=admin \
 -e PMM_PASSWORD=admin \
 -e CLIENT_NAME=pmm-agent-docker \
 perconalab/pmm-client-fb:2.0.0-beta7-PMM-4417-k8s-button-a2319d7
```
